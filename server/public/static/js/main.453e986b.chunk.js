(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t,n){e.exports=n(495)},495:function(e,t,n){"use strict";n.r(t);n(201);var a=n(2),r=n.n(a),c=n(59),s=n.n(c),u=n(39),o=n(110),l=n(199),i=n(61);var p=n(16),h=n.n(p),E=n(20),m=n(70),S=n(71);function f(e){return e.status>=200&&e.status<300?e:e.json().then(function(t){var n=t.hasOwnProperty("message")?t.message:e.statusText;throw new Error(n)})}function d(e){return e.text().then(function(e){return e?JSON.parse(e):{}})}var g=function(){function e(){Object(m.a)(this,e)}return Object(S.a)(e,null,[{key:"getChannels",value:function(){return fetch("".concat("/api","/channels")).then(f).then(d)}},{key:"getMessages",value:function(e){return fetch("".concat("/api","/messages/").concat(e),{method:"GET",mode:"cors"}).then(f).then(d)}},{key:"putMessage",value:function(e,t){var n={method:"PUT",mode:"cors",body:t};return fetch("".concat("/api","/").concat(e),n).then(f).then(d)}}]),e}(),v=h.a.mark(M),b=h.a.mark(T),C=h.a.mark(k),y=h.a.mark(N),O=h.a.mark(A),j=h.a.mark(H),_=h.a.mark(F),x=h.a.mark(U),w=h.a.mark(G);function M(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.d)("SET_CHANNEL",U);case 2:case"end":return e.stop()}},v)}function T(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.d)("FETCH_CHANNELS",A);case 2:case"end":return e.stop()}},b)}function k(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.d)("FETCH_MESSAGES",H);case 2:case"end":return e.stop()}},C)}function N(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.d)("PUT_MESSAGE",F);case 2:case"end":return e.stop()}},y)}function A(e){var t;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(E.b)(g.getChannels,e);case 2:return t=n.sent,n.next=5,Object(E.c)({type:"FETCH_CHANNELS_SUCCESS",payload:t});case 5:case"end":return n.stop()}},O)}function H(e){var t;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(E.b)(g.getMessages,e.payload);case 2:return t=n.sent,n.next=5,Object(E.c)({type:"FETCH_MESSAGES_SUCCESS",payload:{messages:t}});case 5:case"end":return n.stop()}},j)}function F(e){var t,n,a;return h.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.channel,a=t.message,r.next=3,Object(E.c)({type:"PUT_MESSAGE_SUCCESS",payload:{channel:n,message:a}});case 3:return r.next=5,Object(E.b)(g.putMessage,n,a);case 5:case"end":return r.stop()}},_)}function U(e){var t;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(E.c)({type:"SET_CHANNEL_SUCCESS",payload:t});case 3:return n.next=5,Object(E.c)({type:"FETCH_MESSAGES",payload:t});case 5:case"end":return n.stop()}},x)}function G(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([T(),k(),N(),M()]);case 2:case"end":return e.stop()}},w)}var L=n(111),P=n(107),J=n(112),B=n(108),I=n.n(B),D=n(109),X=n.n(D),R=n(146),V=n.n(R),q=n(60),z=n.n(q),K=n(113),Q=n.n(K);function W(e){return{type:"FETCH_MESSAGES",payload:e}}function Y(e){return{type:"PUT_MESSAGE",payload:e}}function Z(e){return{type:"SET_CHANNEL",payload:e}}var $=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",channel:null},n}return Object(J.a)(t,e),Object(S.a)(t,[{key:"changeText",value:function(e){var t=e.target.value;this.setState({text:t})}},{key:"sendMessage",value:function(){var e=this.state.text,t=this.props.channel;this.props.putMessage({channel:t,message:e}),this.setState(Object(i.a)({},this.state,{text:""}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:this.changeText.bind(this),value:this.state.text}),r.a.createElement("button",{disabled:""===this.state.text,onClick:this.sendMessage.bind(this)},"Submit"))}}]),t}(a.Component),ee=function(e){var t=e.message;return r.a.createElement(I.a,null,r.a.createElement(X.a,{secondary:t,disabled:!0}))},te=function(e){function t(){return Object(m.a)(this,t),Object(L.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.onFetchChannels()}},{key:"getChannel",value:function(e){this.props.onFetchMessages(e)}},{key:"render",value:function(){var e=this.props,t=e.setChannel,n=e.putMessage,a=e.channels,c=e.messages,s=e.channel,u=a.map(function(e){return r.a.createElement(I.a,{button:!0,key:e,onClick:function(){return t(e)}},r.a.createElement(X.a,{primary:e}))}),o=c.map(function(e){return r.a.createElement(ee,{message:e})});return r.a.createElement("div",null,r.a.createElement("main",null,r.a.createElement("div",null),r.a.createElement(z.a,{variant:"h4",gutterBottom:!0,component:"h2"},"Channels"),r.a.createElement(z.a,{component:"div"},r.a.createElement(V.a,null,u)),r.a.createElement(Q.a,null),r.a.createElement(z.a,{variant:"h4",gutterBottom:!0,component:"h2"},"Messages ".concat(s||"")),r.a.createElement(z.a,{component:"div"},r.a.createElement(V.a,null,o)),r.a.createElement(Q.a,null),r.a.createElement(z.a,{variant:"h4",gutterBottom:!0,component:"h2"},"Editor"),r.a.createElement("div",null,r.a.createElement($,{channel:s,putMessage:n})),r.a.createElement(Q.a,null)))}}]),t}(a.Component);te.defaultProps={channel:"",channels:[],messages:[]};var ne=Object(o.b)(function(e){return{channels:e.channels,messages:e.messages,channel:e.channel}},function(e){return Object(u.b)({fetchMessages:W,putMessage:Y,setChannel:Z},e)})(te),ae=Object(l.a)(),re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,ce=Object(u.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{channels:[],messages:[],channel:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHANNEL":var n=t.payload;return Object(i.a)({},e,{channel:n,messages:[]});case"FETCH_CHANNELS":return e;case"FETCH_CHANNELS_SUCCESS":return Object(i.a)({},e,{channels:t.payload});case"FETCH_MESSAGES":return e;case"FETCH_MESSAGES_SUCCESS":return Object(i.a)({},e,{messages:t.payload.messages});case"PUT_MESSAGE":!function(e,t){if(e){var n=localStorage.getItem(e),a=JSON.parse(n)||[];a.push(t);var r=JSON.stringify(a);localStorage.setItem(e,r)}}(e.channel,t.payload.message);var a=e.messages.slice();return a.push(t.payload.message),Object(i.a)({},e,{messages:a});case"PUT_MESSAGE_SUCCESS":default:return e}},re(Object(u.a)(ae)));ae.run(G);var se=function(e){return ce.dispatch({type:e})};s.a.render(r.a.createElement(o.a,{store:ce},r.a.createElement(ne,{onFetchChannels:function(){return se("FETCH_CHANNELS")},onFetchMessages:function(){return se("FETCH_MESSAGES")}})),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.453e986b.chunk.js.map